# Настройка и запуск Sentry

## Инициализация

- Сгенерировать ключ

``` bash
make key
```

- Полученый ключ поместить в .env-файл

```
...
SENTRY_SECRET_KEY='<key>'
...
```

- Запустить compose для инициализации Sentry




1. Определить переменные в ".env"

2. Если установка с нуля:

    2.1. Сгенерировать ключ (если перывй раз): 

        make key

    2.2. Вставить ключ в ".env":

        .env -> SENTRY_SECRET_KEY

        Если в ключе есть "#", надо экранировать "\#"
    
3. Запуск:

    3.1. Без проксирования Nginx (контейнер будет слушать порт сервера, на котором будет запущен Sentry):

        3.1.1. Определить порты в ".env":

            .env -> SENTRY_PORT (непосредственный порт Sentry)

            .env -> SENTRY_PORT_EXT (порт сервера для проброса в SENTRY_PORT)
        
        3.1.2. Запустить сборку:

            make up
    
    3.2. С проксированием в Nginx:

        3.2.1. Определить порт в ".env":

            .env -> SENTRY_PORT (непосредственный порт Sentry)

        3.2.2 Заккомментировать порты в "docker-compose.yml":

            services -> sentry -> ports
        
        3.2.3. Запустить сборку:

            make up
    
    3.3. Если установка с нуля:

        3.3.1. Проинициализировать БД:

            make init